var N=Object.defineProperty;var k=(n,t,r)=>t in n?N(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var h=(n,t,r)=>(k(n,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const l=300,d=500,C=1.1,g=new Image;g.src="assets/images/road.png";const E=new Image;E.src="./assets/images/car2.gif";const I=new Image;I.src="./assets/images/car1.gif";const A=new Audio("assets/sound/point.wav"),R=new Audio("assets/sound/die.wav"),b=new Promise(n=>{const t=[g,E,I,A,R];let r=0;t.forEach(f=>{f.addEventListener("canplaythrough",()=>{r++,r===t.length&&n()}),f.addEventListener("load",()=>{r++,r===t.length&&n()})})}),D=60,H=60,V=1,G=2,M=3,K=2e3,Y=25,x=3,q=-80,B=4;function W(n,t){return Math.floor(Math.random()*(t-n)+n)}class T{constructor(t){h(this,"isplayer");h(this,"height");h(this,"width");h(this,"y");h(this,"speed");h(this,"position");h(this,"health");h(this,"lanewidth");this.isplayer=t||!1,this.height=D,this.width=H,this.y=this.isplayer==="player"?d-this.height:q,this.speed=B,this.position=this.isplayer==="player"?G:W(1,4),this.drawCar()}drawCar(){this.lanewidth=l/3,this.isplayer==="player"?e.drawImage(E,this.position*this.lanewidth-(this.lanewidth+this.width)/2,this.y):e.drawImage(I,this.position*this.lanewidth-(this.lanewidth+this.width)/2,this.y)}moveCar(t){this.isplayer||(this.y+=this.speed*(Math.floor(t/10)*C+1))}carCollision(t,r){this.position===t.position&&this.height+this.y>=d-this.height&&(R.play(),r())}}const o=document.createElement("canvas");o.width=l;o.height=d;document.body.appendChild(o);const e=o.getContext("2d");let u=[],c=0,p=0,w=x,m;function $(){e.clearRect(0,0,o.width,o.height),e.fillStyle="black",e.fillRect(0,0,o.width,o.height),e.textAlign="center",e.font="bold 30px Verdana",e.fillStyle="#00FFFF",e.fillText("CAR GAME",l/2,d/3),e.font="bold 20px Verdana",e.fillStyle="white",e.fillText("Press SPACE to Start",l/2,d/2)}function U(){document.removeEventListener("keydown",L),e.drawImage(g,0,0,l,d),e.lineDashOffset=+w,e.strokeStyle="#fff",e.stroke(),e.textAlign="left";const n=new T("player");u.push(n);let t=0,r=!1;function f(){const i=new T;u.push(i)}function s(i){t||(t=i),i-t>K&&(f(),t=i),a(),r||(m=requestAnimationFrame(s))}function a(){F(),u.forEach((i,S)=>{i.moveCar(c),i.drawCar(),S!==0&&(i.y>=d&&(u.splice(S,1),c++,A.currentTime=0,A.play().catch(P=>{console.error("Error playing point sound:",P)}),c%10===0&&(w*=C)),i.carCollision(n,O))}),p+=w}function y(){e.clearRect(0,0,o.width,o.height),e.fillStyle="black",e.drawImage(g,0,p,o.width,o.height),e.drawImage(g,0,p-500,o.width,o.height),e.textAlign="left"}function F(){e.fillStyle="black",e.drawImage(g,0,p,o.width,o.height),e.drawImage(g,0,p-500,o.width,o.height),p>=500&&(p=0),e.font=`${Y}px Arial`,e.fillText(`SCORE: ${c}`,10,50)}function O(){r=!0,m&&cancelAnimationFrame(m);let i=parseInt(localStorage.getItem("highScores1")||"0");c>=i&&(localStorage.setItem("highScores1",c.toString()),i=c),_(i)}function _(i){u.splice(1),setTimeout(()=>{e.clearRect(0,0,l,d),e.fillStyle="black",e.fillRect(0,0,o.width,o.height),e.font="40px Verdana",e.fillStyle="#00FFFF",e.textAlign="center",e.fillText("GAMEOVER",l/2,100),e.font="30px Verdana",e.fillStyle="white",e.fillText("Your Score",l/2,200),e.fillStyle="#fca048",e.fillText(c.toString(),l/2,275),e.font="30px Verdana",e.fillStyle="white",e.fillText("HighScore",l/2,350),e.fillStyle="#fca048",e.fillText(i.toString(),l/2,425),e.font="20px Verdana",e.fillStyle="white",e.fillText("Press R to play again",l/2,460),c=0},1e3)}document.addEventListener("keydown",i=>{(i.key==="r"||i.key==="R")&&(y(),m&&cancelAnimationFrame(m),c=0,w=x,u=[n],r=!1,s(0))});function v(){document.addEventListener("keydown",i=>{(i.key==="a"||i.key==="A")&&n.position!=V&&n.position--,(i.key==="d"||i.key==="D")&&n.position!=M&&n.position++})}v(),s(0)}b.then($);document.addEventListener("keydown",L);function L(n){n.code==="Space"&&U()}
